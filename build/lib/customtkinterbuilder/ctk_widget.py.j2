self.{{ widget_id }} = {{ widget_class }}(master={{ parent }}{% if parameters %}{%- set font_params = {} %}{%- for key, value in parameters.items() if key.startswith("font_") %}{%- set _ = font_params.update({key[5:]: value}) %}{%- endfor %}{%- set param_list = [] %}{%- if font_params %}{%- set font_chunks = [] %}{%- for f_key, f_value in font_params.items() %}{%- set quoted = '"' ~ f_value ~ '"' if f_value is string else f_value %}{%- set _ = font_chunks.append(f_key ~ "=" ~ quoted) %}{%- endfor %}{%- set _ = param_list.append("font=CTkFont(" ~ font_chunks | join(", ") ~ ")") %}{%- endif %}{%- for key, value in parameters.items() %}{%- if key.startswith("font_") %}{# already handled #}{%- elif key == "image" and value %}{%- set img_path = os.path.join("Assets", os.path.basename(value.cget("dark_image").filename)) %}{%- set size = value.cget("size") %}{%- set _ = param_list.append('image=CTkImage(Image.open(r"' ~ img_path ~ '"), size=(' ~ size[0]|string ~ ', ' ~ size[1]|string ~ '))') %}{%- else %}{%- set val = '"' ~ escape_special_chars(value) ~ '"' if value is string else value %}{%- set _ = param_list.append(key ~ "=" ~ val) %}{%- endif %}{%- endfor %}{%- if param_list %}, {{ param_list | join(", ") }}{%- endif %}{%- endif %})
